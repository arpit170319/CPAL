import pandas as pd
import geopandas as gpd
import numpy as np

import json
import requests

# B01001_001E = variable code for 'population' (see census_variables_ALL.xslx - for full list of these)
#place = census designation for cities
#48 = FIPS code for Texas
#key = my api key (please go get your own here - https://www.census.gov/developers/)
#if you want more than one variable, just place it after the first with a comma, like -> B01001_003E,B01001_027E)

api_url = "https://api.census.gov/data/2017/acs/acs5?get=B17001_038E,B17001_039E,B17001_040E,B17001_041E,B17001_042E,B17001_043E,B17001_044E,B17001_045E,B17001_046E,B17001_047E,B17001_048E,B17001_049E,B17001_050E,B17001_051E,B17001_052E,B17001_053E,B17001_054E,B17001_055E,B17001_056E,B17001_057E,B17001_058E,B17001_059E&for=zip%20code%20tabulation%20area:75001, 75006, 75007, 75019, 75032, 75039, 75041, 75043, 75050, 75051, 75052, 75060, 75061, 75062, 75063, 75075, 75080, 75081, 75087, 75088, 75089, 75093, 75098, 75104, 75115, 75116, 75126, 75134, 75141, 75149, 75150, 75159, 75166, 75182, 75201, 75202, 75203, 75204, 75205, 75206, 75207, 75208, 75209, 75210, 75211, 75212, 75214, 75215, 75216, 75217, 75218, 75219, 75220, 75223, 75224, 75225, 75226, 75227, 75228, 75229, 75230, 75231, 75232, 75233, 75234, 75235, 75236, 75237, 75238, 75240, 75241, 75243, 75244, 75246, 75247, 75248, 75249, 75251, 75252, 75253, 75254, 75270, 75287, 75390&key=fd62ca1c2fe4c364285485e558444e6290a9de79";
#api_url = "https://api.census.gov/data/2017/acs/acs5?get=B17001_038E,B17001_039E,B17001_040E,B17001_041E,B17001_042E,B17001_043E,B17001_044E,B17001_045E,B17001_046E,B17001_047E,B17001_048E,B17001_049E,B17001_050E,B17001_051E,B17001_052E,B17001_053E,B17001_054E,B17001_055E,B17001_056E,B17001_057E,B17001_058E,B17001_059E&for=zip%20code%20tabulation%20area:75201,75202,75203,75204,75205,75206,75207,75208,75209,75210,75211,75212,75214,75215,75216,75217,75218,75219,75220,75221,75222,75223,75224,75225,75226,75227,75228,75229,75230,75231,75232,75233,75234,75235,75236,75237,75238,75239,75240,75241,75242,75243,75244,75245,75246,75247,75248,75249,75250,75251,75252,75253,75258,75260,75261,75262,75263,75264,75265,75266,75267,75270,75275,75277,75283,75284,75285,75286,75287,75294,75295,75301,75303,75310,75312,75313,75315,75320,75323,75326,75336,75339,75342,75346,75350,75353,75354,75355,75356,75357,75359,75360,75363,75364,75367,75368,75370,75371,75372,75373,75374,75376,75378,75379,75380,75381,75382,75386,75387,75388,75389,75390,75391,75392,75393,75394,75395,75396,75397,75398&key=fd62ca1c2fe4c364285485e558444e6290a9de79";
#api_url = "https://api.census.gov/data/2017/acs/acs5?get=B25068_011E&for=consolidated%20city:*&in=state:48&key=fd62ca1c2fe4c364285485e558444e6290a9de79";
#api_url ="https://api.census.gov/data/2017/acs/acs5?get=B25068_011E&for=place:19000&in=state:48&key=fd62ca1c2fe4c364285485e558444e6290a9de79";
response = requests.get(api_url)

result = json.loads(response.content.decode('utf-8'))
result
result[1]

texas_pops = pd.DataFrame(data=result)
texas_pops.head()
texas_pops.to_csv("texas_populations_5.csv")
